#include <errno.h>
#include <unistd.h>
#include <stdlib.h>
#include <stdio.h>

int main(int argc, char *argv[]) {
  char executable[] = "prog";
  char *newargv[] = { executable, NULL, NULL, NULL };
  char *newenviron[] = { NULL };

  printf("I am %s, PID = %ld\n",
    argv[0], (long)getpid());
  printf("About to replace myself with the executable %s...\n",
    executable);
  sleep(2);

  execve(executable, newargv, newenviron);

  /* execve() only returns on error */
  perror("execve");
  exit(1);
}
